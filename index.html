<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Cày Thuê Game - Phan Hoàng Quân</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #0f0f23, #1a1a2e); color: #fff; }
        .navbar { background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px); }
        .card { background: rgba(255, 255, 255, 0.1); border: none; backdrop-filter: blur(10px); }
        .btn-primary { background: linear-gradient(45deg, #00b4d8, #0077b6); border: none; }
        .btn-primary:hover { background: linear-gradient(45deg, #0077b6, #005a8b); transform: translateY(-2px); }
        .admin-panel { display: none; } /* Ẩn panel admin ban đầu */
        .product-item { transition: transform 0.3s; }
        .product-item:hover { transform: scale(1.02); }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">Shop Cày Thuê Game</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#" onclick="showHome()">Trang chủ</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" onclick="showLogin()">Đăng nhập</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" onclick="showRegister()">Đăng ký</a></li>
                    <li class="nav-item"><span class="nav-link" id="userStatus">Khách</span></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-5 pt-5">
        <!-- Trang chủ (Danh sách sản phẩm) -->
        <div id="homePage" class="fade-in">
            <h1 class="text-center mb-4">Sản phẩm & Dịch vụ</h1>
            <div id="productList" class="row">
                <!-- Sản phẩm sẽ load từ localStorage -->
            </div>
        </div>

        <!-- Trang đăng ký -->
        <div id="registerPage" class="fade-in" style="display: none;">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card p-4">
                        <h2 class="text-center mb-4">Đăng ký tài khoản</h2>
                        <form onsubmit="registerUser(event)">
                            <div class="mb-3">
                                <label for="regEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="regEmail" required>
                            </div>
                            <div class="mb-3">
                                <label for="regPassword" class="form-label">Mật khẩu</label>
                                <input type="password" class="form-control" id="regPassword" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Đăng ký</button>
                        </form>
                        <p class="text-center mt-3">Đã có tài khoản? <a href="#" onclick="showLogin()">Đăng nhập</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trang đăng nhập -->
        <div id="loginPage" class="fade-in" style="display: none;">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card p-4">
                        <h2 class="text-center mb-4">Đăng nhập</h2>
                        <form onsubmit="loginUser(event)">
                            <div class="mb-3">
                                <label for="loginEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="loginEmail" required>
                            </div>
                            <div class="mb-3">
                                <label for="loginPassword" class="form-label">Mật khẩu</label>
                                <input type="password" class="form-control" id="loginPassword" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Đăng nhập</button>
                        </form>
                        <p class="text-center mt-3">Chưa có tài khoản? <a href="#" onclick="showRegister()">Đăng ký</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Panel Admin -->
        <div id="adminPanel" class="admin-panel fade-in">
            <h1 class="text-center mb-4">Panel Admin</h1>
            <div class="row">
                <div class="col-md-6">
                    <div class="card p-4 mb-4">
                        <h3>Thêm sản phẩm mới</h3>
                        <form onsubmit="addProduct(event)">
                            <div class="mb-3">
                                <label for="productType" class="form-label">Loại sản phẩm</label>
                                <select class="form-select" id="productType" required>
                                    <option value="">Chọn loại</option>
                                    <option value="taikhoan">Tài khoản</option>
                                    <option value="dichvu">Dịch vụ cày thuê</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="productName" class="form-label">Tên sản phẩm</label>
                                <input type="text" class="form-control" id="productName" required>
                            </div>
                            <div class="mb-3">
                                <label for="productDesc" class="form-label">Mô tả</label>
                                <textarea class="form-control" id="productDesc" rows="3" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="productPrice" class="form-label">Giá (VND)</label>
                                <input type="number" class="form-control" id="productPrice" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Thêm sản phẩm</button>
                        </form>
                    </div>
                </div>
                <div class="col-md-6">
                    <h3>Danh sách sản phẩm</h3>
                    <div id="adminProductList" class="card p-3">
                        <!-- Sản phẩm sẽ load từ localStorage -->
                    </div>
                </div>
            </div>
            <button class="btn btn-secondary mt-3" onclick="logout()">Đăng xuất</button>
        </div>
    </div>

    <!-- Bootstrap JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Dữ liệu users (giả lập, lưu localStorage)
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let products = JSON.parse(localStorage.getItem('products')) || [];

        // Hardcode admin
        const ADMIN_EMAIL = 'admin@shop.com';
        const ADMIN_PASSWORD = 'admin123';

        // Hiển thị trạng thái user
        function updateUserStatus() {
            const status = document.getElementById('userStatus');
            if (currentUser) {
                status.textContent = currentUser.email;
                if (currentUser.email === ADMIN_EMAIL) {
                    document.getElementById('adminPanel').style.display = 'block';
                    document.getElementById('homePage').style.display = 'none';
                } else {
                    document.getElementById('adminPanel').style.display = 'none';
                    document.getElementById('homePage').style.display = 'block';
                }
            } else {
                status.textContent = 'Khách';
            }
        }

        // Đăng ký
        function registerUser(e) {
            e.preventDefault();
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            if (users.find(u => u.email === email)) {
                alert('Email đã tồn tại!');
                return;
            }
            users.push({ email, password });
            localStorage.setItem('users', JSON.stringify(users));
            alert('Đăng ký thành công! Hãy đăng nhập.');
            showLogin();
        }

        // Đăng nhập
        function loginUser(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const user = users.find(u => u.email === email && u.password === password);
            if (!user) {
                alert('Email hoặc mật khẩu sai!');
                return;
            }
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateUserStatus();
            showHome();
            alert('Đăng nhập thành công!');
        }

        // Đăng xuất
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUserStatus();
            showHome();
        }

        // Hiển thị trang
        function showHome() {
            document.getElementById('registerPage').style.display = 'none';
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('homePage').style.display = 'block';
            loadProducts();
        }

        function showRegister() {
            document.getElementById('registerPage').style.display = 'block';
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('homePage').style.display = 'none';
        }

        function showLogin() {
            document.getElementById('loginPage').style.display = 'block';
            document.getElementById('registerPage').style.display = 'none';
            document.getElementById('homePage').style.display = 'none';
        }

        // Load sản phẩm
        function loadProducts() {
            const list = document.getElementById('productList');
            list.innerHTML = '';
            products.forEach((product, index) => {
                const col = document.createElement('div');
                col.className = 'col-md-4 mb-4';
                col.innerHTML = `
                    <div class="card product-item h-100">
                        <div class="card-body">
                            <h5 class="card-title">${product.name}</h5>
                            <p class="card-text">${product.desc}</p>
                            <p class="card-text"><strong>Giá: ${product.price} VND</strong></p>
                            <p class="card-text"><small class="text-muted">Loại: ${product.type}</small></p>
                        </div>
                    </div>
                `;
                list.appendChild(col);
            });
            if (products.length === 0) {
                list.innerHTML = '<p class="text-center text-muted">Chưa có sản phẩm nào. Admin hãy thêm!</p>';
            }
        }

        // Load sản phẩm cho admin
        function loadAdminProducts() {
            const list = document.getElementById('adminProductList');
            list.innerHTML = '';
            products.forEach((product, index) => {
                const div = document.createElement('div');
                div.className = 'mb-3 p-3 border rounded';
                div.innerHTML = `
                    <h6>${product.name}</h6>
                    <p>${product.desc}</p>
                    <p>Giá: ${product.price} VND | Loại: ${product.type}</p>
                    <button class="btn btn-danger btn-sm" onclick="deleteProduct(${index})">Xóa</button>
                `;
                list.appendChild(div);
            });
        }

        // Thêm sản phẩm (admin)
        function addProduct(e) {
            e.preventDefault();
            const type = document.getElementById('productType').value;
            const name = document.getElementById('productName').value;
            const desc = document.getElementById('productDesc').value;
            const price = document.getElementById('productPrice').value;
            products.push({ type, name, desc, price });
            localStorage.setItem('products', JSON.stringify(products));
            alert('Thêm sản phẩm thành công!');
            loadAdminProducts();
            // Reset form
            e.target.reset();
        }

        // Xóa sản phẩm (admin)
        function deleteProduct(index) {
            if (confirm('Xóa sản phẩm này?')) {
                products.splice(index, 1);
                localStorage.setItem('products', JSON.stringify(products));
                loadAdminProducts();
                loadProducts(); // Cập nhật trang chủ nếu cần
            }
        }

        // Load khi khởi động
        updateUserStatus();
        if (currentUser) showHome();
        else showLogin();
    </script>
</body>
</html>
